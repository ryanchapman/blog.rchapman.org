---
redirect_from: 
  - /post/16690892045/create-eager-zero-hard-disks-from-powercli-powershell
---

<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title>Create eager zero hard disks from PowerCLI (PowerShell) &middot; Ryan A. Chapman</title>
        <meta name="description" content="">
        <meta name="HandheldFriendly" content="True">
        <meta name="MobileOptimized" content="320">
        <meta name="generator" content="Hugo 0.30.2" />
        <meta name="robots" content="index,follow">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" href="http://blog.rchapman.org/css/normalize.css">
        <link rel="stylesheet" href="http://blog.rchapman.org/css/highlight.css">
        <link rel="stylesheet" href="http://blog.rchapman.org/css/style.css">
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,400,600,700,300&subset=latin,cyrillic-ext,latin-ext,cyrillic">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
    </head>
    <body>
        
<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

ga('create', 'XXX', 'auto');
ga('send', 'pageview');
</script>


        <div id="wrapper">
            <header class="site-header">
                <div class="container">
                    <div class="site-title-wrapper">
                        
                            <h1 class="site-title">
                                <a title="Ryan A. Chapman" href="http://blog.rchapman.org/">Ryan A. Chapman</a>
                            </h1>
                        
                        <a class="button-square" href="http://blog.rchapman.org/index.xml"><i class="fa fa-rss"></i></a>
                        
                            <a class="button-square button-social hint--top" data-hint="Twitter" title="Twitter" href="https://twitter.com/ryanchapman">
                                <i class="fa fa-twitter"></i>
                            </a>
                        
                        
                            <a class="button-square button-social hint--top" data-hint="Github" title="Github" href="https://github.com/ryanchapman">
                                <i class="fa fa-github-alt"></i>
                            </a>
                        
                        
                        
                            <a class="button-square button-social hint--top" data-hint="LinkedIn" title="LinkedIn" href="https://linkedin.com/in/ryanachapman/">
                                <i class="fa fa-linkedin"></i>
                            </a>
                        
                        
                            <a class="button-square button-social hint--top" data-hint="Google+" title="Google+" href="https://plus.google.com/u/0/116175235833210820781">
                                <i class="fa fa-google-plus"></i>
                            </a>
                        
                    </div>

                    <ul class="site-nav">
                        
    <li class="site-nav-item">
        <a title="Latest Post" href="/posts/latest">Latest Post</a>
    </li>

    <li class="site-nav-item">
        <a title="Browse Posts" href="/">Browse Posts</a>
    </li>

                    </ul>
                </div>
            </header>

            <div id="container">


<div class="container">
    <article class="post-container">
        <header class="post-header">
    <h1 class="post-title">Create eager zero hard disks from PowerCLI (PowerShell)</h1>
    
    Published Sun, Jan 29, 2012<br/>
    

</header>


        <div class="post-content clearfix">
    

    <p><em><em>Microsoft PowerShell 2.0, </em>VMware PowerCLI  5.0.0.3501, VMware ESXi 4.1.0</em></p>
<p><strong>New-EagerZeroHardDisk</strong> is a PowerShell function I wrote to create hard disks that are eagerly scrubbed, meaning that ESX will create the hard disk in Thick format and then write zeroes to the disk.  The ESX SDK refers to this as eagerlyScrub, while other documents refer to the process as eagerzero.</p>
<p>Zeroing disks at creation time <em>should</em> create a vmdk in a contiguous region on the physical hard disks, preventing fragmentation and seek times versus a hard disk that is thin.  <strike>I say <em>should</em>, but I'm not sure if this is true.  If you have knowledge on this, please leave a message in the comments.</strike> Update: according to a <a href="http://www.ntpro.nl/blog/archives/2233-Mythbusting-goes-virtual-Dutch-VMUG-2012.html">presentation given by Eric Sloof and Mattias Sundling on ntpro.nl</a>, eager zeroed disks have (slides 41-43) 651% faster throughput and 4.5x faster seeks than lazy zeroed disks.  Compared to thin provisioned disks, eagered zero disks have 632% faster throughput and 4.8x faster seeks.</p>
<p>The function is available on github:</p>
<p><a href="https://github.com/ryanchapman/vmware_scripts">https://github.com/ryanchapman/vmware_scripts</a></p>
<p>git clone git@github.com:ryanchapman/vmware_scripts.git</p>
<p>Once you clone the git repository, source the script in PowerShell with:</p>
<pre>PS C:\TEMP\vmware_scripts&gt; . .\New-EagerZeroDisk.ps1</pre>
<p>Documentation on the function can be had by using the help command:</p>
<pre>PS C:\TEMP\vmware_scripts&gt; help New-EagerZeroHardDisk -Full</pre>
<p> </p>
<a href="http://farm8.staticflickr.com/7034/6781425441_c7ff4eab42_b.jpg"><img src="http://farm8.staticflickr.com/7034/6781425441_c7ff4eab42.jpg"></a>


</div>


        <footer class="post-footer clearfix">
    

    <div class="share">
        <a class="icon-twitter" href="http://twitter.com/share?text=Create%20eager%20zero%20hard%20disks%20from%20PowerCLI%20%28PowerShell%29&url=http%3a%2f%2fblog.rchapman.org%2fposts%2fcreate_eager_zero_hard_disks_from_powercli_powershell%2f"
            onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
            <i class="fa fa-twitter"></i>
            <span class="hidden">Twitter</span>
        </a>

        <a class="icon-facebook" href="https://www.facebook.com/sharer/sharer.php?u=http%3a%2f%2fblog.rchapman.org%2fposts%2fcreate_eager_zero_hard_disks_from_powercli_powershell%2f"
            onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;">
            <i class="fa fa-facebook"></i>
            <span class="hidden">Facebook</span>
        </a>

        <a class="icon-google-plus" href="https://plus.google.com/share?url=http%3a%2f%2fblog.rchapman.org%2fposts%2fcreate_eager_zero_hard_disks_from_powercli_powershell%2f"
           onclick="window.open(this.href, 'google-plus-share', 'width=490,height=530');return false;">
           <i class="fa fa-google-plus"></i>
            <span class="hidden">Google+</span>
        </a>
    </div>
</footer>

            <div class="comments">
        <div id="disqus_thread"></div>
<script>
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "blog-rchapman-org" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
    </div>

    </article>
</div>

            </div>
        </div>

        <footer class="footer">
            <div class="container">
                <div class="site-title-wrapper">
                    <h1 class="site-title">
                        <a title="Ryan A. Chapman" href="http://blog.rchapman.org/">Ryan A. Chapman</a>
                    </h1>
                    <a class="button-square button-jump-top js-jump-top" href="#">
                        <i class="fa fa-angle-up"></i>
                    </a>
                </div>

                <p class="footer-copyright">
                    <span>&copy; 2016 / Powered by <a href="http://gohugo.io/">Hugo</a> / <a href="https://github.com/ryanchapman/blog.rchapman.org">Blog source</a></span>
                </p>
                <p class="footer-copyright">
                    <span><a href="https://github.com/roryg/ghostwriter">Ghostwriter theme</a> By <a href="http://jollygoodthemes.com">JollyGoodThemes</a></span>
                    <span>/ <a href="https://github.com/jbub/ghostwriter">Ported</a> to Hugo By <a href="https://github.com/jbub">jbub</a></span>
                </p>
            </div>
        </footer>

        <script src="http://blog.rchapman.org/js/jquery-1.11.3.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.5/highlight.min.js"></script>
        <script src="http://blog.rchapman.org/js/jquery.fitvids.js"></script>
        <script src="http://blog.rchapman.org/js/scripts.js"></script>
    </body>
</html>

